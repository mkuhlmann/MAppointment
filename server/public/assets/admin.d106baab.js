import{_ as m,u as M,R as A,a as V,d as j,c as S,b as z,e as H}from"./Index.ce582295.js";import{d as _,o as p,c as f,b as a,g as D,r as w,a as L,w as o,u as e,f as B,W as T,M as F,N as g,X as R,Y as E,Z as O,_ as P,n as b,j as y,$ as U,h as W,A as G,D as J,E as x,G as C,a0 as Q,a1 as X,m as Y,I as Z,O as q,Q as K}from"./naive.06cac1e1.js";const ee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},te=a("path",{d:"M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z",fill:"currentColor"},null,-1);var ae=_({name:"Calendar",render:function(t,r){return p(),f("svg",ee,[te])}});const ne={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},oe=a("path",{d:"M24 21h2v5h-2z",fill:"currentColor"},null,-1),se=a("path",{d:"M20 16h2v10h-2z",fill:"currentColor"},null,-1),re=a("path",{d:"M11 26a5.006 5.006 0 0 1-5-5h2a3 3 0 1 0 3-3v-2a5 5 0 0 1 0 10z",fill:"currentColor"},null,-1),le=a("path",{d:"M28 2H4a2.002 2.002 0 0 0-2 2v24a2.002 2.002 0 0 0 2 2h24a2.003 2.003 0 0 0 2-2V4a2.002 2.002 0 0 0-2-2zm0 9H14V4h14zM12 4v7H4V4zM4 28V13h24l.002 15z",fill:"currentColor"},null,-1);var de=_({name:"Dashboard",render:function(t,r){return p(),f("svg",ne,[oe,se,re,le])}});const ie=b("MAppointment"),ce=_({setup(s){const t=D;w(1);const r=M(),n=function(d){return()=>y(U,null,{default:()=>y(d)})},i=function(d,v){return y(A,{to:{path:v}},{default:()=>d})},c=[{label:()=>i("Dashboard","/"),key:"dashboard",icon:n(de)},{label:()=>i("Termine","/appointments"),key:"appointments",icon:n(ae)}];return(d,v)=>{const l=L("router-view");return p(),f(e(B),{theme:e(t)},{default:o(()=>[a(e(g),{position:"absolute"},{default:o(()=>[a(e(T),{style:{height:"64px",display:"flex","align-items":"center",padding:"0 32px"},bordered:""},{default:o(()=>[a(e(F),{class:"logo"},{default:o(()=>[ie]),_:1})]),_:1}),a(e(g),{"has-sider":"",position:"absolute",style:{top:"64px"}},{default:o(()=>[R(a(e(O),{bordered:"","collapse-mode":"width","collapsed-width":64,width:240,"show-trigger":""},{default:o(()=>[a(e(P),{"collapsed-width":64,"collapsed-icon-size":22,options:c})]),_:1},512),[[E,e(r).path!="/login"]]),a(e(g),null,{default:o(()=>[a(l)]),_:1})]),_:1})]),_:1})]),_:1},8,["theme"])}}});var ue=m(ce,[["__scopeId","data-v-c44fcc7c"]]);const pe={};function he(s,t){return" Termine "}var me=m(pe,[["render",he]]);let _e="http://localhost:8080",h=null;localStorage.getItem("jwt")&&(h=localStorage.getItem("jwt"));let fe=function(){return h!=null};const ve=async function(s,t,r=!1){const n=await $("/api/v1/auth/login",{body:{username:s,password:t}});return n.jwt?(h=n.jwt,r&&localStorage.setItem("jwt",n.jwt),!0):!1},$=async function(s,t={}){s=`${_e}${s}`,t.headers?typeof t.headers=="object"&&(t.headers=new Headers(t.headers)):t.headers=new Headers,typeof t.body=="object"&&(t.body=JSON.stringify(t.body),t.headers.append("Content-Type","application/json"),t.method||(t.method="POST")),h&&t.headers.append("Authorization",`Bearer ${h}`);const n=await(await fetch(s,t)).json();return n.error,n};function k(){return{login:ve,isSignedIn:fe,$fetch:$}}const we={class:"page-container"},ge=b(" Anmeldung fehlgeschlagen. Bitte \xFCberpr\xFCfen Sie Ihre Eingaben. "),be=b("Anmelden"),ye=_({setup(s){const t=k(),r=V(),n=W({username:"",password:"",remember:!0}),i=w(!1),c=w(!1),d=async function(){c.value=!0,await t.login(n.username,n.password,n.remember)?r.push("/dashboard"):(i.value=!0,c.value=!1)};return t.isSignedIn()&&r.push("/dashboard"),(v,l)=>(p(),G("div",we,[a(e(q),{class:"auth-card",title:"MAppointment \u2014 Anmeldung"},{default:o(()=>[a(e(J),{model:e(n),onSubmit:d},{default:o(()=>[a(e(x),{item:"",path:"firstname",label:"Nutzer"},{default:o(()=>[a(e(C),{value:e(n).username,"onUpdate:value":l[0]||(l[0]=u=>e(n).username=u),placeholder:"Nuter / E-Mail"},null,8,["value"])]),_:1}),a(e(x),{item:"",path:"lastname",label:"Passwort"},{default:o(()=>[a(e(C),{type:"password","show-password-on":"click",value:e(n).password,"onUpdate:value":l[1]||(l[1]=u=>e(n).password=u),placeholder:"Passwort"},null,8,["value"])]),_:1}),a(e(x),{item:"",path:"remember",label:"Angemeldet bleiben"},{default:o(()=>[a(e(Q),{modelValue:e(n).remember,"onUpdate:modelValue":l[2]||(l[2]=u=>e(n).remember=u)},null,8,["modelValue"])]),_:1}),i.value?(p(),f(e(X),{key:0,class:"mb-8",type:"error"},{default:o(()=>[ge]),_:1})):Y("",!0),a(e(Z),{onClick:d,loading:c.value,type:"primary"},{default:o(()=>[be]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1})]))}});var xe=m(ye,[["__scopeId","data-v-3e32ea77"]]);const Ne={};function Ce(s,t){return null}var $e=m(Ne,[["render",Ce]]);const ke=[{path:"/404",name:"NotFound",component:H},{path:"/login",name:"Login",component:xe},{path:"/appointments",name:"Appointments",component:me},{path:"/",name:"Dashboard",component:$e}];j.locale("de");const N=K(ue),I=S({history:z("/admin"),routes:ke});N.use(I).mount("#app");const{isSignedIn:Ie}=k();Ie()||I.push("/login");N.provide("$isMobileScreen",screen.width<=760);N.provide("$isDarkMode",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);
